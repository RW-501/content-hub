<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="page-title">Category Page</title>
<meta name="description" content="Browse articles in this category.">
<meta name="keywords" content="CMS, Content Management, Dashboard, Website Editor, Admin Panel, SEO Tools, ContentHub Guru">
<meta name="author" content="ContentHub.guru">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="revisit-after" content="7 days">
<meta name="rating" content="general">
<meta name="format-detection" content="telephone=no">
<meta name="HandheldFriendly" content="true">
<meta name="MobileOptimized" content="320">
<!-- Progressive Web App meta -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1a1a1a">
<link rel="canonical" href="https://contenthub.guru/">

<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="https://contenthub.guru/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://contenthub.guru/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://contenthub.guru/images/favicons/favicon-16x16.png">
<link rel="manifest" href="https://contenthub.guru/images/favicons/site.webmanifest">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:site_name" content="Content Hub">
<meta property="og:title" content="Content Hub – Smart CMS Dashboard for Websites">
<meta property="og:description" content="Manage, edit, and optimize your websites from one dashboard. ContentHub.guru makes content management simple and powerful.">
<meta property="og:url" content="https://contenthub.guru/">
<meta property="og:image" content="https://contenthub.guru/images/logo.png">
<meta property="og:image:alt" content="Content Hub Logo">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="en_US">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Content Hub – Smart CMS Dashboard for Websites">
<meta name="twitter:description" content="Manage, edit, and optimize your websites with ContentHub.guru. A powerful CMS dashboard built for creators.">
<meta name="twitter:image" content="https://contenthub.guru/images/logo.png">
<meta name="twitter:image:alt" content="Content Hub Logo">
<meta name="twitter:site" content="@ContentHub">
<meta name="twitter:creator" content="@ContentHub">

<!-- Performance / Preconnect / Prefetch -->
<link rel="preconnect" href="https://www.googletagmanager.com">
<link rel="dns-prefetch" href="https://www.googletagmanager.com">
<link rel="preload" href="https://contenthub.guru/images/logo.png" as="image">
<link rel="preload" href="https://contenthub.guru/css/style.css" as="style">

<!-- Verification / Monetization -->
<meta name="google-site-verification" content="YOUR_GOOGLE_VERIFICATION_CODE">
<meta name="yandex-verification" content="26ca8e2174c73ca5">
<meta name="msvalidate.01" content="41794433A3D0795B3768E9AE59B10997">
<meta name="google-adsense-account" content="ca-pub-2001518155292747">

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2001518155292747" crossorigin="anonymous"></script>

<!-- Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPWGF7YMPE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ZPWGF7YMPE');
</script>

<!-- Structured Data: Website -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Content Hub",
  "url": "https://contenthub.guru/category",
  "description": "CMS dashboard to manage your websites with SEO, analytics, and collaboration tools.",
  "publisher": {
    "@type": "Organization",
    "name": "ContentHub.guru",
    "logo": {
      "@type": "ImageObject",
      "url": "https://contenthub.guru/images/logo.png"
    }
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://contenthub.guru/search?query={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<!-- Breadcrumb Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://contenthub.guru"},
    {"@type": "ListItem", "position": 2, "name": "Categories", "item": "https://contenthub.guru/category/"},
    {"@type": "ListItem", "position": 3, "name": "About", "item": "https://contenthub.guru/about"},
    {"@type": "ListItem", "position": 4, "name": "Contact Us", "item": "https://contenthub.guru/contact-us"}
  ]
}
</script>

<!-- Featured Content / FAQ Schema (Optional but boosts rich results) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is Content Hub?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Content Hub is a modern CMS dashboard to manage and optimize websites with SEO, analytics, and collaboration tools."
      }
    },
    {
      "@type": "Question",
      "name": "Who can use Content Hub?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Content Hub is built for website owners, editors, marketers, and developers who want a unified content management platform."
      }
    }
  ]
}
</script>

<!-- PWA / Mobile App Optimizations -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes">
<meta name="apple-mobile-web-app-title" content="Content Hub">
<meta name="msapplication-TileColor" content="#1a1a1a">
<meta name="msapplication-TileImage" content="https://contenthub.guru/images/favicons/favicon-144x144.png">

<!-- Optional SEO Enhancers -->
<meta name="subject" content="Content Management System">
<meta name="coverage" content="Worldwide">
<meta name="distribution" content="Global">
<meta name="audience" content="All">
<meta name="generator" content="ContentHub CMS v1.0">
<meta name="copyright" content="ContentHub.guru">
<meta name="reply-to" content="support@contenthub.guru">
<meta name="rating" content="General">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
<meta name="resource-type" content="document">
<meta name="doc-type" content="Web Page">
<meta name="doc-rights" content="Public">
<meta name="content-language" content="en">
<meta name="DC.title" content="Content Hub – Smart CMS Dashboard for Websites">
<meta name="DC.description" content="CMS dashboard for content management, SEO, and analytics.">
<meta name="DC.publisher" content="ContentHub.guru">
<meta name="DC.language" content="en">
<meta name="DC.creator" content="ContentHub.guru">

<link rel="stylesheet" href="https://contenthub.guru/css/style.css">
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#f4f6f8; color:#333; }
  a { text-decoration:none; color:inherit; }
  header { background: #4f46e5; color: #fff; padding: 2rem; text-align: center; }
  header h1 { margin: 0; font-size: 2rem; }
  main.container { max-width: 1200px; margin:auto; padding: 1rem; }
  .category-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:1rem; margin-top:1rem; }
  .page-card { display:flex; flex-direction:column; background:#fff; border-radius:8px; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
  .page-card:hover { transform: translateY(-3px); }
  .page-card img { width:100%; height:180px; object-fit:cover; }
  .page-info { padding:1rem; flex:1; display:flex; flex-direction:column; }
  .page-info h3 { margin:0 0 0.5rem 0; font-size:1.25rem; color:#4f46e5; }
  .page-info p { margin:0.25rem 0; flex-grow:1; }
  .page-info a.read-more { margin-top:0.5rem; font-weight:bold; color:#4f46e5; text-decoration:none; }
  .page-info a.read-more:hover { text-decoration:underline; }
  .loading { text-align:center; padding:2rem; font-size:1.2rem; color:#555; }
</style>
</head>
<body>

<!-- Header -->
<div id="main-header"></div>
<script type="module">
  import {  } from 'https://contenthub.guru/exports/header.js';
</script>


<main class="container">
  <header>
    <h1>Category: <span id="category-title">Loading...</span></h1>
  </header>

  <section id="category-pages" class="category-grid">
    <p class="loading">Loading pages...</p>
  </section>

  <!-- Suggested Pages Section -->
  <section id="suggested-pages" class="category-grid" style="margin-top:2rem;">
    <h2>Suggested Pages</h2>
    <p class="loading">Loading suggested pages...</p>
  </section>
</main>

<div id="loader"><div class="spinner"></div></div>

<!-- Footer -->
<div id="main-footer"></div>
<script type="module">
  import { loadFooter } from 'https://contenthub.guru/exports/footer.js';
  loadFooter(); // injects footer into div#main-footer
</script>

<style>
  /* Loader styles */
  #loader {
    display: none;
    text-align: center;
    margin: 2rem 0;
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    top: 0;
    width: auto;
    height: auto;
    z-index: 200;

}
#loader .spinner {
    position: absolute;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #4f46e5;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    animation: spin 1s linear infinite;
    display: inline-block;
    margin: auto;
    bottom: 0;
    top: 0;
}
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getFirestore, collection, query, where, getDocs, limit, startAfter, orderBy } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBXZcSYdspfi2jBipwUFeNmKZgU02ksg8c",
  authDomain: "contentmanagement-8af61.firebaseapp.com",
  projectId: "contentmanagement-8af61",
  storageBucket: "contentmanagement-8af61.firebasestorage.app",
  messagingSenderId: "579537581112",
  appId: "1:579537581112:web:736c7faafaf1391ce1e2cd",
  measurementId: "G-ZPWGF7YMPE"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const categoryContainer = document.getElementById("category-pages");
const suggestedContainer = document.getElementById("suggested-pages");
const loader = document.getElementById("loader");

let lastDoc = null;
let isLoading = false;
const PAGE_LIMIT = 6;
const listedSlugs = [];

function showLoader() { loader.style.display = "block"; }
function hideLoader() { loader.style.display = "none"; }

async function loadCategoryBatch(category) {
  if (isLoading) return;
  isLoading = true;
  showLoader();

  const pagesRef = collection(db, "pages");
  const q = lastDoc
    ? query(pagesRef, where("category", "==", category), orderBy("title"), startAfter(lastDoc), limit(PAGE_LIMIT))
    : query(pagesRef, where("category", "==", category), orderBy("title"), limit(PAGE_LIMIT));

  const snapshot = await getDocs(q);

  if (snapshot.empty) {
    if (!lastDoc) categoryContainer.innerHTML = `<p class="loading">No pages found in "${category}" yet.</p>`;
    hideLoader();
    isLoading = false;
    return;
  }

  snapshot.forEach(doc => {
    const data = doc.data();
    listedSlugs.push(data.slug);
    const readTime = data.readTime || 5;
    const image = data.image || "https://contenthub.guru/images/placeholder.png";

    categoryContainer.innerHTML += `
      <div class="page-card">
        <img src="${image}" alt="${data.title}" loading="lazy">
        <div class="page-info">
          <a href="https://contenthub.guru/site/${data.slug}"><h3>${data.title}</h3></a>
          <p>${(data.description || "").slice(0, 120)}...</p>
          <p>Reading Time: ${readTime} min</p>
          <a href="https://contenthub.guru/site/${data.slug}" class="read-more">Read More →</a>
        </div>
      </div>
    `;
  });

  lastDoc = snapshot.docs[snapshot.docs.length - 1];
  hideLoader();
  isLoading = false;
}

async function loadSuggestedPages(category) {
  const pagesRef = collection(db, "pages");
  const suggestedQuery = query(pagesRef, where("category", "==", category), limit(6));
  const suggestedSnapshot = await getDocs(suggestedQuery);

  suggestedContainer.innerHTML = "";
  let suggestionsAdded = 0;

  suggestedSnapshot.forEach(doc => {
    const data = doc.data();
    if (!listedSlugs.includes(data.slug)) {
      const readTime = data.readTime || 5;
      const image = data.image || "https://contenthub.guru/images/placeholder.png";

      suggestedContainer.innerHTML += `
        <div class="page-card">
          <img src="${image}" alt="${data.title}" loading="lazy">
          <div class="page-info">
            <a href="https://contenthub.guru/site/${data.slug}"><h3>${data.title}</h3></a>
            <p>${(data.description || "").slice(0, 120)}...</p>
            <p>Reading Time: ${readTime} min</p>
            <a href="https://contenthub.guru/site/${data.slug}" class="read-more">Read More →</a>
          </div>
        </div>
      `;
      suggestionsAdded++;
    }
  });

  if (suggestionsAdded === 0) {
    suggestedContainer.innerHTML = `<p class="loading">No additional suggested pages in this category.</p>`;
  }
}

function setupInfiniteScroll(category) {
  window.addEventListener("scroll", () => {
    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 300) {
      loadCategoryBatch(category);
    }
  });
}

async function initCategory() {
  const params = new URLSearchParams(window.location.search);
  const rawCategory = params.get("c") || "general";

  // 🔹 normalize to lowercase for Firestore query
  const category = rawCategory.toLowerCase();

  document.title = `Category: ${rawCategory} | ContentHub.guru`; // keep display capitalized
  document.getElementById("category-title").textContent = rawCategory;

  await loadCategoryBatch(category);
  await loadSuggestedPages(category);
  setupInfiniteScroll(category);
}

window.addEventListener("DOMContentLoaded", initCategory);
</script>


</body>
</html>
